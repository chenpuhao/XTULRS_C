# 湘潭大学图书馆预约系统 - C语言部分

## 项目简介
本项目是 **2025湘潭大学软件工程C语言大作业**，实现了一个图书馆预约系统的核心功能模块，使用 **C语言** 编写，支持座位管理、用户管理和预约统计功能。项目采用链表数据结构存储信息，并通过 **cJSON** 库实现数据的序列化与反序列化。

用户图形界面部分请移步 [前端项目](https://github.com/chenpuhao/XTULRS_CS_V2)

---

## 功能概述

### 1. 座位管理
- **添加座位**：支持动态添加座位信息。
- **删除座位**：根据房间号和座位号删除座位。
- **查询座位**：
  - 按房间号查询座位。
  - 按座位号查询座位。
  - 按是否被预约查询座位。
  - 返回所有座位信息。
- **导入/导出座位**：支持从 JSON 文件导入或导出座位信息。
- **保存/加载座位**：将座位信息保存到文件或从文件加载。

### 2. 用户管理
- **用户注册**：支持添加新用户。
- **用户登录**：通过邮箱和密码验证用户身份。
- **修改用户信息**：
  - 修改用户名。
  - 修改密码。
  - 设置用户为管理员或普通用户。
- **查询用户**：
  - 返回所有用户信息（仅管理员可用）。
  - 获取当前用户信息。
- **删除用户**：根据邮箱和密码删除用户。
- **保存/加载用户**：将用户信息保存到文件或从文件加载。

### 3. 预约统计
- **添加统计**：记录用户的预约信息。
- **删除统计**：根据房间号、座位号和时间删除统计信息。
- **查询统计**：
  - 按房间号查询统计信息。
  - 按座位号查询统计信息。
  - 按用户查询统计信息。
  - 按时间或时间范围查询统计信息。
  - 返回所有统计信息（仅管理员可用）。
- **清空统计**：清空所有统计信息。
- **保存/加载统计**：将统计信息保存到文件或从文件加载。

---

## 项目结构
```
湘潭大学图书馆预约系统/
├── CMakeLists.txt          # CMake 配置文件
├── main.c                  # 项目主代码文件
├── libs/
│   └── cJSON.c             # cJSON 库实现文件
│   └── cJSON.h             # cJSON 库头文件
├── cmake-build-debug/
│   ├── users.json          # 用户信息存储文件
│   ├── seats.json          # 座位信息存储文件
│   ├── statistics.json     # 统计信息存储文件
├── Readme.md               # 项目说明文档
```
---

## 环境要求

- **操作系统**：Windows
- **编译器**：支持 C11 标准的编译器（如 GCC 或 MSVC）
- **构建工具**：CMake 3.31 或更高版本
- **依赖库**：cJSON

---

## 编译与运行

### 1. 编译项目
确保已安装 CMake 和支持 C11 的编译器，执行以下命令：
```bash
cmake -B cmake-build-debug
cmake --build cmake-build-debug
```
### 2. 运行项目
编译完成后，生成的动态链接库可供其他程序调用。

## 数据文件说明
1. users.json
存储用户信息，格式如下：
```json
{
    "users": [
        {
            "name": "admin",
            "email": "123",
            "password": "123456",
            "isAdmin": 1,
            "seat": null
        }
    ]
}
```

2. seats.json
存储座位信息，格式如下：
```json
{
    "seats": [
        {
            "room": 1,
            "seat": 1,
            "isOccupied": 0
        }
    ]
}
```

3. statistics.json
4. 存储预约统计信息，格式如下：
```json
{
    "statistics": [
        {
            "room": 1,
            "seat": 1,
            "time": "2025-05-06 00:12:51",
            "user": "admin"
        }
    ]
}
```

## 注意事项
1. 线程安全性：本项目未实现线程安全，建议在单线程环境中使用。
2. 时间格式：时间统一采用 yyyy-MM-dd HH:mm:ss 格式。
3. 管理员权限：部分功能（如查看所有用户、统计信息）仅管理员可用。

## 贡献者
- 亡灵